#summary The areas Serene concentrates on.

= Special Characteristics =
<br>
There are two areas *Serene* is mainly concentrating on: the ambiguity and conflicts handling, and the validation messages.



==Ambiguity and Conflicts Handling==


There are three stages in the resolving of the different components of an xml document with respect to the corresponding RELAX NG schema patterns:

    * *initial matching* consists of the matching of an input element or attribute's name to the name class corresponding to one of the definitions allowed by the schema in the respective context. Since characters definition patterns (text, data, value, list) do not have a name, in this stage, all the characters patterns defined within a context are considered a match.

    * *pattern matching* consists of matching of a schema pattern to the corresponding occurrence in the document based on the content, this is done at the level of element definition pattern, attribute definition pattern, characters definition pattern (in *Serene* characters strings are considered to have a structure since some patterns may contain group, oneOrMore etc)

    * *in context handling* consists of handling of an occurrence as part of the parent's context

After every one of these stages we can end up with 0, 1, or several candidate definition patterns matching the input.

In case the result is 1 the processing goes on normally, with no need for ambiguity handling.

In case the result consists of several patterns in the next stage those will be processed in parallel handlers. Every candidate handler where the processing results in a disqualifying error, that is an error that is not common to all candidates, is disqualified. A new assessment is done at the end of every stage and the processing goes on according to the number of remaining candidates(0, 1, or several). If we find ourselves in this case after the *in context handling* a warning message is issued stating that the concerned document component could not be resolved to a single definition pattern and informing the user about the remaining candidates.

In case the number of candidates is 0 an error message is always issued. The processing in this case is different according to the stage. After the *initial matching* no further processing is done. After *pattern matching* all candidates go to the next stage in an attempt to see if this stage can result in a resolution to one definition. The *in context handling* is last, so there is no processing after it. 

==Messages==


*Serene* attempts to deliver good, meaningful messages. In the same time it attempts to handle all messages, including error and warning messages resulted from the ambiguity and conflict handling, in a uniform and transparent way. Also the syntax validation for the schema documents and the validation of document syntax are handled transparently using exactly the same algorithm.

In order to achieve all this transparency, an approach was chosen where a distinction is made between the detection, interpretation and reporting of errors. This approach allows to group the messages produced by the disqualifying errors of different candidates during conflict handling and report them in the ambiguity error message, or ambiguity warning message. Another consequence of this approach is the fact that errors produced in an element content, corresponding to a content model, are reported when the end of that element is processed. This means that the location information passed to the SAXParseException is that of the end tag of the element in whose context the error took place. Location information regarding the exact place where the error occurred is provided in the content of the message in a meaningful way.

Using exactly the same algorithm for the syntax validation of both schemas and documents and, in the same time, trying to be meaningful means that the messages are always pointing to the rule that has been broken; that is a rule from the RELAX NG syntax specification in the case of schemas, and a pattern from the concerned schema in the case of documents. 